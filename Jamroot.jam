import path ;

using testing ;

path-constant PROJECT_DIR : . ;

project codingdojo
:
	requirements
		<address-model>32:<architecture>x86
		<warnings>on
		<optimization>speed
		<threading>multi

		<target-os>windows:<define>WIN32
		<toolset>gcc:<cxxflags>-std=c++14
;

lib gmock
:
	[ path.join $(PROJECT_DIR) lib/gmock/gmock-gtest-all.cc ]
:
	<include>lib/gmock
	<link>static
:
	<address-model>32  
:
	<include>lib/gmock
;

lib dojo
:
	[ path.glob [ path.join $(PROJECT_DIR) src/main ] : *.c* ]
:
	<link>static
:
	<address-model>32  
:
	<include>src/main
;

unit-test dojo-test
:
	.//gmock
	.//dojo

	[ path.join $(PROJECT_DIR) lib/gmock/gmock_main.cc ]

	[ path.glob-tree [ path.join $(PROJECT_DIR) src/test ] : *.c* ]
:
:
	<address-model>32  
;
